{% extends "base_page.html" %}
{% load wagtailcore_tags wagtailimages_tags %}
{% load widget_tweaks %}

{% block content %}

{# Banner #}
{% if page.banner_image %}
  <section class="banner-contact">
    <div class="container">
      <div class="row"><div class="col">
        {% image page.banner_image width-1600 class="img-fluid" alt=page.title %}
      </div></div>
    </div>
  </section>
{% endif %}

<main class="container my-5">
  <h1>Get in Touch</h1>

  {# Intro text #}
  {% if page.intro_text %}
    <div class="mt-3 fs-5 rich-text">
      {{ page.intro_text|richtext }}
    </div>
  {% endif %}

  <div class="row mt-4">
    <div class="col-12">
      {# Contact info list #}
      {% if page.phone or page.public_email or page.address %}
        <section>
          <p class="mt-2 fs-4">Feel free to reach out to me through the following channels:</p>
          <ul class="list-unstyled fs-4">
            {% if page.phone %}
              <li><i class="fas fa-phone-alt"></i> Phone: {{ page.phone }}</li>
            {% endif %}
            {% if page.public_email %}
              <li><i class="fas fa-envelope"></i> Email: <a href="mailto:{{ page.public_email }}">{{ page.public_email }}</a></li>
            {% endif %}
            {% if page.address %}
              <li><i class="fas fa-map-marker-alt"></i> Address: {{ page.address|linebreaksbr }}</li>
            {% endif %}
          </ul>
        </section>
      {% endif %}

      {# Form #}
      <section class="d-flex flex-column align-items-center">
        {% if page.form_intro_text %}
          <div class="mt-4 fs-4 text-center rich-text">{{ page.form_intro_text|richtext }}</div>
        {% else %}
          <p class="mt-4 fs-4 text-center">Or just fill in the form below:</p>
        {% endif %}

        <form action="{% pageurl page %}" method="POST" class="mt-4" style="max-width:500px;width:100%;" novalidate>
  {% csrf_token %}
  {% for field in form.visible_fields %}
    <div class="mb-3">
      <label for="{{ field.id_for_label }}" class="visually-hidden">{{ field.label }}</label>

      {% if field.errors %}
        {% render_field field class+="form-control form-control-lg is-invalid" placeholder=field.label %}
        <div class="invalid-feedback d-block">{{ field.errors|first }}</div>
      {% else %}
        {% render_field field class+="form-control form-control-lg" placeholder=field.label %}
      {% endif %}

      {% if field.help_text %}
        <div class="form-text">{{ field.help_text }}</div>
      {% endif %}
    </div>
  {% endfor %}

  <div class="d-grid">
    <button type="submit" class="btn btn-dark btn-lg">
      <i class="fas fa-paper-plane"></i> Send
    </button>
  </div>
</form>

      </section>
    </div>
  </div>
</main>

{% endblock %}
